import{a as Y,i as Z,s as x,f as m,ap as le,p as N,q,$ as te,l as U,v as F,y as W,b5 as we,bb as ke,z as j,t as b,b as p,o as C,A as fe,k as O,x as H,r as ne,F as V,n as X,P as ve,w as ie,c as y,m as I,d as E,bc as $e,E as _e,H as M,G as ze,I as R,a6 as S,a7 as J,e as Ae,u as Fe,h as qe,j as Be,W as ce,ay as ye}from"../lite.js";import{B as he}from"./BlockLabel-B0HN-MOU.js";import{E as Ie}from"./Empty-C76eC2zW.js";import{F as ee}from"./File-Kbo-bXuF.js";import{U as ge}from"./Upload-BskNBEHw.js";import{U as Ee}from"./Upload-D_TzP4YC.js";import{I as Pe}from"./IconButtonWrapper-Ck50MZwX.js";import{D as Ue}from"./DownloadLink-B8hI46-W.js";const se=t=>{let e=["B","KB","MB","GB","PB"],n=0;for(;t>1024;)t/=1024,n++;let l=e[n];return t.toFixed(1)+"&nbsp;"+l};function ae(t,e,n){const l=t.slice();return l[14]=e[n],l[16]=n,l}function Ce(t){let e=t[2]("file.uploading")+"",n;return{c(){n=O(e)},m(l,i){U(l,n,i)},p(l,i){i&4&&e!==(e=l[2]("file.uploading")+"")&&X(n,e)},i:ie,o:ie,d(l){l&&C(n)}}}function De(t){let e,n;function l(){return t[9](t[14])}return e=new Ue({props:{href:t[14].url,download:t[7]&&window.__is_colab__?null:t[14].orig_name,$$slots:{default:[Ne]},$$scope:{ctx:t}}}),e.$on("click",l),{c(){y(e.$$.fragment)},m(i,s){I(e,i,s),n=!0},p(i,s){t=i;const u={};s&8&&(u.href=t[14].url),s&8&&(u.download=t[7]&&window.__is_colab__?null:t[14].orig_name),s&131080&&(u.$$scope={dirty:s,ctx:t}),e.$set(u)},i(i){n||(b(e.$$.fragment,i),n=!0)},o(i){p(e.$$.fragment,i),n=!1},d(i){E(e,i)}}}function Ne(t){let e,n=(t[14].size!=null?se(t[14].size):"(size unknown)")+"",l;return{c(){e=new $e(!1),l=O(" ⇣"),e.a=l},m(i,s){e.m(n,i,s),U(i,l,s)},p(i,s){s&8&&n!==(n=(i[14].size!=null?se(i[14].size):"(size unknown)")+"")&&e.p(n)},d(i){i&&(e.d(),C(l))}}}function oe(t){let e,n,l,i;function s(){return t[10](t[16])}function u(...c){return t[11](t[16],...c)}return{c(){e=N("td"),n=N("button"),n.textContent="×",q(n,"class","label-clear-button svelte-18wv37q"),q(n,"aria-label","Remove this file"),q(e,"class","svelte-18wv37q")},m(c,o){U(c,e,o),F(e,n),l||(i=[V(n,"click",s),V(n,"keydown",u)],l=!0)},p(c,o){t=c},d(c){c&&C(e),l=!1,ve(i)}}}function re(t,e){let n,l,i,s=e[14].filename_stem+"",u,c,o,r=e[14].filename_ext+"",f,a,g,k,d,v,L,h,w,z,P;const G=[De,Ce],D=[];function K(A,B){return A[14].url?0:1}d=K(e),v=D[d]=G[d](e);let $=e[3].length>1&&oe(e);function Q(...A){return e[12](e[16],...A)}return{key:t,first:null,c(){n=N("tr"),l=N("td"),i=N("span"),u=O(s),c=H(),o=N("span"),f=O(r),g=H(),k=N("td"),v.c(),L=H(),$&&$.c(),h=H(),q(i,"class","stem svelte-18wv37q"),q(o,"class","ext svelte-18wv37q"),q(l,"class","filename svelte-18wv37q"),q(l,"aria-label",a=e[14].orig_name),q(k,"class","download svelte-18wv37q"),q(n,"class","file svelte-18wv37q"),ne(n,"selectable",e[0]),this.first=n},m(A,B){U(A,n,B),F(n,l),F(l,i),F(i,u),F(l,c),F(l,o),F(o,f),F(n,g),F(n,k),D[d].m(k,null),F(n,L),$&&$.m(n,null),F(n,h),w=!0,z||(P=V(n,"click",Q),z=!0)},p(A,B){e=A,(!w||B&8)&&s!==(s=e[14].filename_stem+"")&&X(u,s),(!w||B&8)&&r!==(r=e[14].filename_ext+"")&&X(f,r),(!w||B&8&&a!==(a=e[14].orig_name))&&q(l,"aria-label",a);let T=d;d=K(e),d===T?D[d].p(e,B):(W(),p(D[T],1,1,()=>{D[T]=null}),j(),v=D[d],v?v.p(e,B):(v=D[d]=G[d](e),v.c()),b(v,1),v.m(k,null)),e[3].length>1?$?$.p(e,B):($=oe(e),$.c(),$.m(n,h)):$&&($.d(1),$=null),(!w||B&1)&&ne(n,"selectable",e[0])},i(A){w||(b(v),w=!0)},o(A){p(v),w=!1},d(A){A&&C(n),D[d].d(),$&&$.d(),z=!1,P()}}}function Ge(t){let e,n,l,i=[],s=new Map,u,c=le(t[3]);const o=r=>r[14];for(let r=0;r<c.length;r+=1){let f=ae(t,c,r),a=o(f);s.set(a,i[r]=re(a,f))}return{c(){e=N("div"),n=N("table"),l=N("tbody");for(let r=0;r<i.length;r+=1)i[r].c();q(l,"class","svelte-18wv37q"),q(n,"class","file-preview svelte-18wv37q"),q(e,"class","file-preview-holder svelte-18wv37q"),te(e,"max-height",typeof t[1]===void 0?"auto":t[1]+"px")},m(r,f){U(r,e,f),F(e,n),F(n,l);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(l,null);u=!0},p(r,[f]){f&253&&(c=le(r[3]),W(),i=we(i,f,o,1,r,c,s,l,ke,re,null,ae),j()),(!u||f&2)&&te(e,"max-height",typeof r[1]===void 0?"auto":r[1]+"px")},i(r){if(!u){for(let f=0;f<c.length;f+=1)b(i[f]);u=!0}},o(r){for(let f=0;f<i.length;f+=1)p(i[f]);u=!1},d(r){r&&C(e);for(let f=0;f<i.length;f+=1)i[f].d()}}}function He(t){const e=t.lastIndexOf(".");return e===-1?[t,""]:[t.slice(0,e),t.slice(e)]}function Le(t,e,n){let l;const i=fe();let{value:s}=e,{selectable:u=!1}=e,{height:c=void 0}=e,{i18n:o}=e;function r(h,w){const z=h.currentTarget;(h.target===z||z&&z.firstElementChild&&h.composedPath().includes(z.firstElementChild))&&i("select",{value:l[w].orig_name,index:w})}function f(h){const w=l.splice(h,1);n(3,l=[...l]),n(8,s=l),i("delete",w[0]),i("change",l)}function a(h){i("download",h)}const g=typeof window<"u",k=h=>a(h),d=h=>{f(h)},v=(h,w)=>{w.key==="Enter"&&f(h)},L=(h,w)=>{r(w,h)};return t.$$set=h=>{"value"in h&&n(8,s=h.value),"selectable"in h&&n(0,u=h.selectable),"height"in h&&n(1,c=h.height),"i18n"in h&&n(2,o=h.i18n)},t.$$.update=()=>{t.$$.dirty&256&&n(3,l=(Array.isArray(s)?s:[s]).map(h=>{const[w,z]=He(h.orig_name??"");return{...h,filename_stem:w,filename_ext:z}}))},[u,c,o,l,r,f,a,g,s,k,d,v,L]}class Me extends Y{constructor(e){super(),Z(this,e,Le,Ge,x,{value:8,selectable:0,height:1,i18n:2})}get value(){return this.$$.ctx[8]}set value(e){this.$$set({value:e}),m()}get selectable(){return this.$$.ctx[0]}set selectable(e){this.$$set({selectable:e}),m()}get height(){return this.$$.ctx[1]}set height(e){this.$$set({height:e}),m()}get i18n(){return this.$$.ctx[2]}set i18n(e){this.$$set({i18n:e}),m()}}const de=Me;function Te(t){let e,n;return e=new Ie({props:{unpadded_box:!0,size:"large",$$slots:{default:[je]},$$scope:{ctx:t}}}),{c(){y(e.$$.fragment)},m(l,i){I(e,l,i),n=!0},p(l,i){const s={};i&256&&(s.$$scope={dirty:i,ctx:l}),e.$set(s)},i(l){n||(b(e.$$.fragment,l),n=!0)},o(l){p(e.$$.fragment,l),n=!1},d(l){E(e,l)}}}function We(t){let e,n;return e=new de({props:{i18n:t[5],selectable:t[3],value:t[0],height:t[4]}}),e.$on("select",t[6]),e.$on("download",t[7]),{c(){y(e.$$.fragment)},m(l,i){I(e,l,i),n=!0},p(l,i){const s={};i&32&&(s.i18n=l[5]),i&8&&(s.selectable=l[3]),i&1&&(s.value=l[0]),i&16&&(s.height=l[4]),e.$set(s)},i(l){n||(b(e.$$.fragment,l),n=!0)},o(l){p(e.$$.fragment,l),n=!1},d(l){E(e,l)}}}function je(t){let e,n;return e=new ee({}),{c(){y(e.$$.fragment)},m(l,i){I(e,l,i),n=!0},i(l){n||(b(e.$$.fragment,l),n=!0)},o(l){p(e.$$.fragment,l),n=!1},d(l){E(e,l)}}}function Ke(t){let e,n,l,i,s,u,c;e=new he({props:{show_label:t[2],float:t[0]===null,Icon:ee,label:t[1]||"File"}});const o=[We,Te],r=[];function f(a,g){return g&1&&(l=null),l==null&&(l=!!(a[0]&&(!Array.isArray(a[0])||a[0].length>0))),l?0:1}return i=f(t,-1),s=r[i]=o[i](t),{c(){y(e.$$.fragment),n=H(),s.c(),u=_e()},m(a,g){I(e,a,g),U(a,n,g),r[i].m(a,g),U(a,u,g),c=!0},p(a,[g]){const k={};g&4&&(k.show_label=a[2]),g&1&&(k.float=a[0]===null),g&2&&(k.label=a[1]||"File"),e.$set(k);let d=i;i=f(a,g),i===d?r[i].p(a,g):(W(),p(r[d],1,1,()=>{r[d]=null}),j(),s=r[i],s?s.p(a,g):(s=r[i]=o[i](a),s.c()),b(s,1),s.m(u.parentNode,u))},i(a){c||(b(e.$$.fragment,a),b(s),c=!0)},o(a){p(e.$$.fragment,a),p(s),c=!1},d(a){a&&(C(n),C(u)),E(e,a),r[i].d(a)}}}function Oe(t,e,n){let{value:l=null}=e,{label:i}=e,{show_label:s=!0}=e,{selectable:u=!1}=e,{height:c=void 0}=e,{i18n:o}=e;function r(a){M.call(this,t,a)}function f(a){M.call(this,t,a)}return t.$$set=a=>{"value"in a&&n(0,l=a.value),"label"in a&&n(1,i=a.label),"show_label"in a&&n(2,s=a.show_label),"selectable"in a&&n(3,u=a.selectable),"height"in a&&n(4,c=a.height),"i18n"in a&&n(5,o=a.i18n)},[l,i,s,u,c,o,r,f]}class Re extends Y{constructor(e){super(),Z(this,e,Oe,Ke,x,{value:0,label:1,show_label:2,selectable:3,height:4,i18n:5})}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),m()}get label(){return this.$$.ctx[1]}set label(e){this.$$set({label:e}),m()}get show_label(){return this.$$.ctx[2]}set show_label(e){this.$$set({show_label:e}),m()}get selectable(){return this.$$.ctx[3]}set selectable(e){this.$$set({selectable:e}),m()}get height(){return this.$$.ctx[4]}set height(e){this.$$set({height:e}),m()}get i18n(){return this.$$.ctx[5]}set i18n(e){this.$$set({i18n:e}),m()}}const rl=Re;function Se(t){let e,n,l,i;function s(o){t[25](o)}function u(o){t[26](o)}let c={filetype:t[5],file_count:t[4],max_file_size:t[10],root:t[7],stream_handler:t[12],upload:t[11],$$slots:{default:[Qe]},$$scope:{ctx:t}};return t[13]!==void 0&&(c.dragging=t[13]),t[1]!==void 0&&(c.uploading=t[1]),e=new ge({props:c}),R.push(()=>S(e,"dragging",s)),R.push(()=>S(e,"uploading",u)),e.$on("load",t[14]),e.$on("error",t[27]),{c(){y(e.$$.fragment)},m(o,r){I(e,o,r),i=!0},p(o,r){const f={};r&32&&(f.filetype=o[5]),r&16&&(f.file_count=o[4]),r&1024&&(f.max_file_size=o[10]),r&128&&(f.root=o[7]),r&4096&&(f.stream_handler=o[12]),r&2048&&(f.upload=o[11]),r&268435456&&(f.$$scope={dirty:r,ctx:o}),!n&&r&8192&&(n=!0,f.dragging=o[13],J(()=>n=!1)),!l&&r&2&&(l=!0,f.uploading=o[1],J(()=>l=!1)),e.$set(f)},i(o){i||(b(e.$$.fragment,o),i=!0)},o(o){p(e.$$.fragment,o),i=!1},d(o){E(e,o)}}}function Je(t){let e,n,l,i;return e=new Pe({props:{$$slots:{default:[Xe]},$$scope:{ctx:t}}}),l=new de({props:{i18n:t[9],selectable:t[6],value:t[0],height:t[8]}}),l.$on("select",t[22]),l.$on("change",t[23]),l.$on("delete",t[24]),{c(){y(e.$$.fragment),n=H(),y(l.$$.fragment)},m(s,u){I(e,s,u),U(s,n,u),I(l,s,u),i=!0},p(s,u){const c={};u&268451507&&(c.$$scope={dirty:u,ctx:s}),e.$set(c);const o={};u&512&&(o.i18n=s[9]),u&64&&(o.selectable=s[6]),u&1&&(o.value=s[0]),u&256&&(o.height=s[8]),l.$set(o)},i(s){i||(b(e.$$.fragment,s),b(l.$$.fragment,s),i=!0)},o(s){p(e.$$.fragment,s),p(l.$$.fragment,s),i=!1},d(s){s&&C(n),E(e,s),E(l,s)}}}function Qe(t){let e;const n=t[17].default,l=Ae(n,t,t[28],null);return{c(){l&&l.c()},m(i,s){l&&l.m(i,s),e=!0},p(i,s){l&&l.p&&(!e||s&268435456)&&Fe(l,n,i,i[28],e?Be(n,i[28],s,null):qe(i[28]),null)},i(i){e||(b(l,i),e=!0)},o(i){p(l,i),e=!1},d(i){l&&l.d(i)}}}function ue(t){let e,n;return e=new ce({props:{Icon:Ee,label:t[9]("common.upload"),$$slots:{default:[Ve]},$$scope:{ctx:t}}}),{c(){y(e.$$.fragment)},m(l,i){I(e,l,i),n=!0},p(l,i){const s={};i&512&&(s.label=l[9]("common.upload")),i&268450994&&(s.$$scope={dirty:i,ctx:l}),e.$set(s)},i(l){n||(b(e.$$.fragment,l),n=!0)},o(l){p(e.$$.fragment,l),n=!1},d(l){E(e,l)}}}function Ve(t){let e,n,l,i;function s(o){t[18](o)}function u(o){t[19](o)}let c={icon_upload:!0,filetype:t[5],file_count:t[4],max_file_size:t[10],root:t[7],stream_handler:t[12],upload:t[11]};return t[13]!==void 0&&(c.dragging=t[13]),t[1]!==void 0&&(c.uploading=t[1]),e=new ge({props:c}),R.push(()=>S(e,"dragging",s)),R.push(()=>S(e,"uploading",u)),e.$on("load",t[14]),e.$on("error",t[20]),{c(){y(e.$$.fragment)},m(o,r){I(e,o,r),i=!0},p(o,r){const f={};r&32&&(f.filetype=o[5]),r&16&&(f.file_count=o[4]),r&1024&&(f.max_file_size=o[10]),r&128&&(f.root=o[7]),r&4096&&(f.stream_handler=o[12]),r&2048&&(f.upload=o[11]),!n&&r&8192&&(n=!0,f.dragging=o[13],J(()=>n=!1)),!l&&r&2&&(l=!0,f.uploading=o[1],J(()=>l=!1)),e.$set(f)},i(o){i||(b(e.$$.fragment,o),i=!0)},o(o){p(e.$$.fragment,o),i=!1},d(o){E(e,o)}}}function Xe(t){let e=!(t[4]==="single"&&(Array.isArray(t[0])?t[0].length>0:t[0]!==null)),n,l,i,s=e&&ue(t);return l=new ce({props:{Icon:ye,label:t[9]("common.clear")}}),l.$on("click",t[21]),{c(){s&&s.c(),n=H(),y(l.$$.fragment)},m(u,c){s&&s.m(u,c),U(u,n,c),I(l,u,c),i=!0},p(u,c){c&17&&(e=!(u[4]==="single"&&(Array.isArray(u[0])?u[0].length>0:u[0]!==null))),e?s?(s.p(u,c),c&17&&b(s,1)):(s=ue(u),s.c(),b(s,1),s.m(n.parentNode,n)):s&&(W(),p(s,1,1,()=>{s=null}),j());const o={};c&512&&(o.label=u[9]("common.clear")),l.$set(o)},i(u){i||(b(s),b(l.$$.fragment,u),i=!0)},o(u){p(s),p(l.$$.fragment,u),i=!1},d(u){u&&C(n),s&&s.d(u),E(l,u)}}}function Ye(t){let e,n,l,i,s,u,c;e=new he({props:{show_label:t[3],Icon:ee,float:!t[0],label:t[2]||"File"}});const o=[Je,Se],r=[];function f(a,g){return g&1&&(l=null),l==null&&(l=!!(a[0]&&(!Array.isArray(a[0])||a[0].length>0))),l?0:1}return i=f(t,-1),s=r[i]=o[i](t),{c(){y(e.$$.fragment),n=H(),s.c(),u=_e()},m(a,g){I(e,a,g),U(a,n,g),r[i].m(a,g),U(a,u,g),c=!0},p(a,[g]){const k={};g&8&&(k.show_label=a[3]),g&1&&(k.float=!a[0]),g&4&&(k.label=a[2]||"File"),e.$set(k);let d=i;i=f(a,g),i===d?r[i].p(a,g):(W(),p(r[d],1,1,()=>{r[d]=null}),j(),s=r[i],s?s.p(a,g):(s=r[i]=o[i](a),s.c()),b(s,1),s.m(u.parentNode,u))},i(a){c||(b(e.$$.fragment,a),b(s),c=!0)},o(a){p(e.$$.fragment,a),p(s),c=!1},d(a){a&&(C(n),C(u)),E(e,a),r[i].d(a)}}}function Ze(t,e,n){let{$$slots:l={},$$scope:i}=e,{value:s}=e,{label:u}=e,{show_label:c=!0}=e,{file_count:o="single"}=e,{file_types:r=null}=e,{selectable:f=!1}=e,{root:a}=e,{height:g=void 0}=e,{i18n:k}=e,{max_file_size:d=null}=e,{upload:v}=e,{stream_handler:L}=e,{uploading:h=!1}=e;async function w({detail:_}){Array.isArray(s)?n(0,s=[...s,...Array.isArray(_)?_:[_]]):s?n(0,s=[s,...Array.isArray(_)?_:[_]]):n(0,s=_),await ze(),P("change",s),P("upload",_)}function z(){n(0,s=null),P("change",null),P("clear")}const P=fe();let G=!1;function D(_){G=_,n(13,G)}function K(_){h=_,n(1,h)}function $(_){M.call(this,t,_)}const Q=_=>{P("clear"),_.stopPropagation(),z()};function A(_){M.call(this,t,_)}function B(_){M.call(this,t,_)}function T(_){M.call(this,t,_)}function me(_){G=_,n(13,G)}function be(_){h=_,n(1,h)}function pe(_){M.call(this,t,_)}return t.$$set=_=>{"value"in _&&n(0,s=_.value),"label"in _&&n(2,u=_.label),"show_label"in _&&n(3,c=_.show_label),"file_count"in _&&n(4,o=_.file_count),"file_types"in _&&n(5,r=_.file_types),"selectable"in _&&n(6,f=_.selectable),"root"in _&&n(7,a=_.root),"height"in _&&n(8,g=_.height),"i18n"in _&&n(9,k=_.i18n),"max_file_size"in _&&n(10,d=_.max_file_size),"upload"in _&&n(11,v=_.upload),"stream_handler"in _&&n(12,L=_.stream_handler),"uploading"in _&&n(1,h=_.uploading),"$$scope"in _&&n(28,i=_.$$scope)},t.$$.update=()=>{t.$$.dirty&8192&&P("drag",G)},[s,h,u,c,o,r,f,a,g,k,d,v,L,G,w,z,P,l,D,K,$,Q,A,B,T,me,be,pe,i]}class xe extends Y{constructor(e){super(),Z(this,e,Ze,Ye,x,{value:0,label:2,show_label:3,file_count:4,file_types:5,selectable:6,root:7,height:8,i18n:9,max_file_size:10,upload:11,stream_handler:12,uploading:1})}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),m()}get label(){return this.$$.ctx[2]}set label(e){this.$$set({label:e}),m()}get show_label(){return this.$$.ctx[3]}set show_label(e){this.$$set({show_label:e}),m()}get file_count(){return this.$$.ctx[4]}set file_count(e){this.$$set({file_count:e}),m()}get file_types(){return this.$$.ctx[5]}set file_types(e){this.$$set({file_types:e}),m()}get selectable(){return this.$$.ctx[6]}set selectable(e){this.$$set({selectable:e}),m()}get root(){return this.$$.ctx[7]}set root(e){this.$$set({root:e}),m()}get height(){return this.$$.ctx[8]}set height(e){this.$$set({height:e}),m()}get i18n(){return this.$$.ctx[9]}set i18n(e){this.$$set({i18n:e}),m()}get max_file_size(){return this.$$.ctx[10]}set max_file_size(e){this.$$set({max_file_size:e}),m()}get upload(){return this.$$.ctx[11]}set upload(e){this.$$set({upload:e}),m()}get stream_handler(){return this.$$.ctx[12]}set stream_handler(e){this.$$set({stream_handler:e}),m()}get uploading(){return this.$$.ctx[1]}set uploading(e){this.$$set({uploading:e}),m()}}const ul=xe;export{ul as B,rl as F,de as a};
//# sourceMappingURL=FileUpload-ecm8EADp.js.map
