import"./IconButtonWrapper.svelte_svelte_type_style_lang-DAP8_Zsr.js";import"./MarkdownCode.svelte_svelte_type_style_lang-DGVaFc0z.js";import{B as dt}from"./BlockLabel-CnzaitFN.js";import{I as Le}from"./IconButton-DtUbToT-.js";import{C as gt}from"./Clear-By3xiIwg.js";import{I as ht,M as bt,a as pt}from"./Minimize-Biy58KWs.js";import{W as wt,a as vt,S as kt}from"./SelectSource-CT71dqzj.js";import{I as yt}from"./IconButtonWrapper-fdTarNL8.js";import{g as It}from"./utils-Gtzs_Zla.js";import{D as lt}from"./DropdownArrow-B7m41FWT.js";import{S as $t}from"./Square-oAGqOwsh.js";import"./StreamingBar.svelte_svelte_type_style_lang-CxOfZBE-.js";import{f as St}from"./index-BrtE_kHU.js";import{S as qt}from"./StreamingBar-CCUnT5tf.js";import{d as Ct}from"./index-C3YFQtYK.js";import{U as Dt}from"./Upload-DlIG0o6o.js";/* empty css                                                   */import{I as Et}from"./Image-BRVH1yXn.js";const{SvelteComponent:zt,append:He,attr:A,detach:Mt,init:Wt,insert:Bt,noop:We,safe_not_equal:Nt,svg_element:Be}=window.__gradio__svelte__internal;function jt(i){let e,t,n;return{c(){e=Be("svg"),t=Be("path"),n=Be("circle"),A(t,"d","M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"),A(n,"cx","12"),A(n,"cy","13"),A(n,"r","4"),A(e,"xmlns","http://www.w3.org/2000/svg"),A(e,"width","100%"),A(e,"height","100%"),A(e,"viewBox","0 0 24 24"),A(e,"fill","none"),A(e,"stroke","currentColor"),A(e,"stroke-width","1.5"),A(e,"stroke-linecap","round"),A(e,"stroke-linejoin","round"),A(e,"class","feather feather-camera")},m(l,s){Bt(l,e,s),He(e,t),He(e,n)},p:We,i:We,o:We,d(l){l&&Mt(e)}}}class Rt extends zt{constructor(e){super(),Wt(this,e,null,jt,Nt,{})}}const{SvelteComponent:Tt,append:Ut,attr:H,detach:Lt,init:Vt,insert:At,noop:Ne,safe_not_equal:Ft,svg_element:Oe}=window.__gradio__svelte__internal;function Ht(i){let e,t;return{c(){e=Oe("svg"),t=Oe("circle"),H(t,"cx","12"),H(t,"cy","12"),H(t,"r","10"),H(e,"xmlns","http://www.w3.org/2000/svg"),H(e,"width","100%"),H(e,"height","100%"),H(e,"viewBox","0 0 24 24"),H(e,"stroke-width","1.5"),H(e,"stroke-linecap","round"),H(e,"stroke-linejoin","round"),H(e,"class","feather feather-circle")},m(n,l){At(n,e,l),Ut(e,t)},p:Ne,i:Ne,o:Ne,d(n){n&&Lt(e)}}}class Ot extends Tt{constructor(e){super(),Vt(this,e,null,Ht,Ft,{})}}const{SvelteComponent:Pt,append:ve,attr:je,create_component:Gt,destroy_component:Jt,detach:Kt,element:Re,init:Qt,insert:Xt,listen:Yt,mount_component:Zt,noop:xt,safe_not_equal:en,set_style:tn,space:nn,text:ln,transition_in:rn,transition_out:sn}=window.__gradio__svelte__internal,{createEventDispatcher:on}=window.__gradio__svelte__internal;function an(i){let e,t,n,l,s,r="Click to Access Webcam",a,o,u,f;return l=new wt({}),{c(){e=Re("button"),t=Re("div"),n=Re("span"),Gt(l.$$.fragment),s=nn(),a=ln(r),je(n,"class","icon-wrap svelte-qbrfs"),je(t,"class","wrap svelte-qbrfs"),je(e,"class","svelte-qbrfs"),tn(e,"height","100%")},m(_,w){Xt(_,e,w),ve(e,t),ve(t,n),Zt(l,n,null),ve(t,s),ve(t,a),o=!0,u||(f=Yt(e,"click",i[1]),u=!0)},p:xt,i(_){o||(rn(l.$$.fragment,_),o=!0)},o(_){sn(l.$$.fragment,_),o=!1},d(_){_&&Kt(e),Jt(l),u=!1,f()}}}function cn(i){const e=on();return[e,()=>e("click")]}class un extends Pt{constructor(e){super(),Qt(this,e,cn,an,en,{})}}function _n(){return navigator.mediaDevices.enumerateDevices()}function fn(i,e){e.srcObject=i,e.muted=!0,e.play()}async function Pe(i,e,t){const n={width:{ideal:1920},height:{ideal:1440}},l={video:t?{deviceId:{exact:t},...n}:n,audio:i};return navigator.mediaDevices.getUserMedia(l).then(s=>(fn(s,e),s))}function mn(i){return i.filter(t=>t.kind==="videoinput")}const{SvelteComponent:dn,action_destroyer:gn,add_render_callback:hn,append:C,attr:k,binding_callbacks:bn,check_outros:de,create_component:Y,create_in_transition:pn,destroy_component:Z,destroy_each:wn,detach:T,element:B,empty:Ve,ensure_array_like:Ge,flush:P,group_outros:ge,init:vn,insert:U,listen:$e,mount_component:x,noop:Ae,run_all:kn,safe_not_equal:yn,set_data:pe,set_input_value:Te,set_style:rt,space:G,src_url_equal:Je,stop_propagation:In,text:we,toggle_class:oe,transition_in:z,transition_out:W}=window.__gradio__svelte__internal,{createEventDispatcher:$n,onMount:Sn}=window.__gradio__svelte__internal;function Ke(i,e,t){const n=i.slice();return n[37]=e[t],n}function qn(i){let e,t,n,l,s,r,a,o,u,f,_;const w=[En,Dn],y=[];function j(b,v){return b[2]==="video"||b[1]?0:1}n=j(i),l=y[n]=w[n](i);let d=!i[11]&&Qe(i),h=i[13]&&i[8]&&Xe(i);return{c(){e=B("div"),t=B("button"),l.c(),r=G(),d&&d.c(),a=G(),h&&h.c(),o=Ve(),k(t,"aria-label",s=i[2]==="image"?"capture photo":"start recording"),k(t,"class","svelte-s8feoe"),k(e,"class","button-wrap svelte-s8feoe")},m(b,v){U(b,e,v),C(e,t),y[n].m(t,null),C(e,r),d&&d.m(e,null),U(b,a,v),h&&h.m(b,v),U(b,o,v),u=!0,f||(_=$e(t,"click",i[16]),f=!0)},p(b,v){let F=n;n=j(b),n===F?y[n].p(b,v):(ge(),W(y[F],1,1,()=>{y[F]=null}),de(),l=y[n],l?l.p(b,v):(l=y[n]=w[n](b),l.c()),z(l,1),l.m(t,null)),(!u||v[0]&4&&s!==(s=b[2]==="image"?"capture photo":"start recording"))&&k(t,"aria-label",s),b[11]?d&&(ge(),W(d,1,1,()=>{d=null}),de()):d?(d.p(b,v),v[0]&2048&&z(d,1)):(d=Qe(b),d.c(),z(d,1),d.m(e,null)),b[13]&&b[8]?h?(h.p(b,v),v[0]&8448&&z(h,1)):(h=Xe(b),h.c(),z(h,1),h.m(o.parentNode,o)):h&&(ge(),W(h,1,1,()=>{h=null}),de())},i(b){u||(z(l),z(d),z(h),u=!0)},o(b){W(l),W(d),W(h),u=!1},d(b){b&&(T(e),T(a),T(o)),y[n].d(),d&&d.d(),h&&h.d(b),f=!1,_()}}}function Cn(i){let e,t,n,l;return t=new un({}),t.$on("click",i[26]),{c(){e=B("div"),Y(t.$$.fragment),k(e,"title","grant webcam access"),rt(e,"height","100%")},m(s,r){U(s,e,r),x(t,e,null),l=!0},p:Ae,i(s){l||(z(t.$$.fragment,s),s&&(n||hn(()=>{n=pn(e,St,{delay:100,duration:200}),n.start()})),l=!0)},o(s){W(t.$$.fragment,s),l=!1},d(s){s&&T(e),Z(t)}}}function Dn(i){let e,t,n;return t=new Rt({}),{c(){e=B("div"),Y(t.$$.fragment),k(e,"class","icon svelte-s8feoe"),k(e,"title","capture photo")},m(l,s){U(l,e,s),x(t,e,null),n=!0},p:Ae,i(l){n||(z(t.$$.fragment,l),n=!0)},o(l){W(t.$$.fragment,l),n=!1},d(l){l&&T(e),Z(t)}}}function En(i){let e,t,n,l;const s=[Wn,Mn,zn],r=[];function a(o,u){return o[1]&&o[10]==="waiting"?0:o[1]&&o[10]==="open"||!o[1]&&o[11]?1:2}return e=a(i),t=r[e]=s[e](i),{c(){t.c(),n=Ve()},m(o,u){r[e].m(o,u),U(o,n,u),l=!0},p(o,u){let f=e;e=a(o),e===f?r[e].p(o,u):(ge(),W(r[f],1,1,()=>{r[f]=null}),de(),t=r[e],t?t.p(o,u):(t=r[e]=s[e](o),t.c()),z(t,1),t.m(n.parentNode,n))},i(o){l||(z(t),l=!0)},o(o){W(t),l=!1},d(o){o&&T(n),r[e].d(o)}}}function zn(i){let e,t,n,l,s=i[4]("audio.record")+"",r,a;return n=new Ot({}),{c(){e=B("div"),t=B("div"),Y(n.$$.fragment),l=G(),r=we(s),k(t,"class","icon color-primary svelte-s8feoe"),k(t,"title","start recording"),k(e,"class","icon-with-text svelte-s8feoe")},m(o,u){U(o,e,u),C(e,t),x(n,t,null),C(e,l),C(e,r),a=!0},p(o,u){(!a||u[0]&16)&&s!==(s=o[4]("audio.record")+"")&&pe(r,s)},i(o){a||(z(n.$$.fragment,o),a=!0)},o(o){W(n.$$.fragment,o),a=!1},d(o){o&&T(e),Z(n)}}}function Mn(i){let e,t,n,l,s=i[4]("audio.stop")+"",r,a;return n=new $t({}),{c(){e=B("div"),t=B("div"),Y(n.$$.fragment),l=G(),r=we(s),k(t,"class","icon color-primary svelte-s8feoe"),k(t,"title","stop recording"),k(e,"class","icon-with-text svelte-s8feoe")},m(o,u){U(o,e,u),C(e,t),x(n,t,null),C(e,l),C(e,r),a=!0},p(o,u){(!a||u[0]&16)&&s!==(s=o[4]("audio.stop")+"")&&pe(r,s)},i(o){a||(z(n.$$.fragment,o),a=!0)},o(o){W(n.$$.fragment,o),a=!1},d(o){o&&T(e),Z(n)}}}function Wn(i){let e,t,n,l,s=i[4]("audio.waiting")+"",r,a;return n=new vt({}),{c(){e=B("div"),t=B("div"),Y(n.$$.fragment),l=G(),r=we(s),k(t,"class","icon color-primary svelte-s8feoe"),k(t,"title","spinner"),k(e,"class","icon-with-text svelte-s8feoe"),rt(e,"width","var(--size-24)")},m(o,u){U(o,e,u),C(e,t),x(n,t,null),C(e,l),C(e,r),a=!0},p(o,u){(!a||u[0]&16)&&s!==(s=o[4]("audio.waiting")+"")&&pe(r,s)},i(o){a||(z(n.$$.fragment,o),a=!0)},o(o){W(n.$$.fragment,o),a=!1},d(o){o&&T(e),Z(n)}}}function Qe(i){let e,t,n,l,s;return t=new lt({}),{c(){e=B("button"),Y(t.$$.fragment),k(e,"class","icon svelte-s8feoe"),k(e,"aria-label","select input source")},m(r,a){U(r,e,a),x(t,e,null),n=!0,l||(s=$e(e,"click",i[27]),l=!0)},p:Ae,i(r){n||(z(t.$$.fragment,r),n=!0)},o(r){W(t.$$.fragment,r),n=!1},d(r){r&&T(e),Z(t),l=!1,s()}}}function Xe(i){let e,t,n,l,s,r,a;n=new lt({});function o(_,w){return _[7].length===0?Nn:Bn}let u=o(i),f=u(i);return{c(){e=B("select"),t=B("button"),Y(n.$$.fragment),l=G(),f.c(),k(t,"class","inset-icon svelte-s8feoe"),k(e,"class","select-wrap svelte-s8feoe"),k(e,"aria-label","select source")},m(_,w){U(_,e,w),C(e,t),x(n,t,null),C(t,l),f.m(e,null),s=!0,r||(a=[$e(t,"click",In(i[28])),gn(Fe.call(null,e,i[17])),$e(e,"change",i[14])],r=!0)},p(_,w){u===(u=o(_))&&f?f.p(_,w):(f.d(1),f=u(_),f&&(f.c(),f.m(e,null)))},i(_){s||(z(n.$$.fragment,_),s=!0)},o(_){W(n.$$.fragment,_),s=!1},d(_){_&&T(e),Z(n),f.d(),r=!1,kn(a)}}}function Bn(i){let e,t=Ge(i[7]),n=[];for(let l=0;l<t.length;l+=1)n[l]=Ye(Ke(i,t,l));return{c(){for(let l=0;l<n.length;l+=1)n[l].c();e=Ve()},m(l,s){for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(l,s);U(l,e,s)},p(l,s){if(s[0]&384){t=Ge(l[7]);let r;for(r=0;r<t.length;r+=1){const a=Ke(l,t,r);n[r]?n[r].p(a,s):(n[r]=Ye(a),n[r].c(),n[r].m(e.parentNode,e))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},d(l){l&&T(e),wn(n,l)}}}function Nn(i){let e,t=i[4]("common.no_devices")+"",n;return{c(){e=B("option"),n=we(t),e.__value="",Te(e,e.__value),k(e,"class","svelte-s8feoe")},m(l,s){U(l,e,s),C(e,n)},p(l,s){s[0]&16&&t!==(t=l[4]("common.no_devices")+"")&&pe(n,t)},d(l){l&&T(e)}}}function Ye(i){let e,t=i[37].label+"",n,l,s,r;return{c(){e=B("option"),n=we(t),l=G(),e.__value=s=i[37].deviceId,Te(e,e.__value),e.selected=r=i[8].deviceId===i[37].deviceId,k(e,"class","svelte-s8feoe")},m(a,o){U(a,e,o),C(e,n),C(e,l)},p(a,o){o[0]&128&&t!==(t=a[37].label+"")&&pe(n,t),o[0]&128&&s!==(s=a[37].deviceId)&&(e.__value=s,Te(e,e.__value)),o[0]&384&&r!==(r=a[8].deviceId===a[37].deviceId)&&(e.selected=r)},d(a){a&&T(e)}}}function jn(i){let e,t,n,l,s,r,a,o,u,f,_;t=new qt({props:{time_limit:i[9]}});const w=[Cn,qn],y=[];function j(d,h){return d[12]?1:0}return u=j(i),f=y[u]=w[u](i),{c(){e=B("div"),Y(t.$$.fragment),n=G(),l=B("video"),s=G(),r=B("img"),o=G(),f.c(),k(l,"class","svelte-s8feoe"),oe(l,"flip",i[3]),oe(l,"hide",!i[12]||i[12]&&!!i[0]),Je(r.src,a=i[0]?.url)||k(r,"src",a),k(r,"class","svelte-s8feoe"),oe(r,"hide",!i[12]||i[12]&&!i[0]),k(e,"class","wrap svelte-s8feoe")},m(d,h){U(d,e,h),x(t,e,null),C(e,n),C(e,l),i[25](l),C(e,s),C(e,r),C(e,o),y[u].m(e,null),_=!0},p(d,h){const b={};h[0]&512&&(b.time_limit=d[9]),t.$set(b),(!_||h[0]&8)&&oe(l,"flip",d[3]),(!_||h[0]&4097)&&oe(l,"hide",!d[12]||d[12]&&!!d[0]),(!_||h[0]&1&&!Je(r.src,a=d[0]?.url))&&k(r,"src",a),(!_||h[0]&4097)&&oe(r,"hide",!d[12]||d[12]&&!d[0]);let v=u;u=j(d),u===v?y[u].p(d,h):(ge(),W(y[v],1,1,()=>{y[v]=null}),de(),f=y[u],f?f.p(d,h):(f=y[u]=w[u](d),f.c()),z(f,1),f.m(e,null))},i(d){_||(z(t.$$.fragment,d),z(f),_=!0)},o(d){W(t.$$.fragment,d),W(f),_=!1},d(d){d&&T(e),Z(t),i[25](null),y[u].d()}}}function Fe(i,e){const t=n=>{i&&!i.contains(n.target)&&!n.defaultPrevented&&e(n)};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function Rn(i,e,t){let n,l=[],s=null,r=null,a="closed";const o=g=>{g==="closed"?(t(9,r=null),t(10,a="closed"),t(0,M=null)):g==="waiting"?t(10,a="waiting"):t(10,a="open")},u=g=>{S&&t(9,r=g)};let f,{streaming:_=!1}=e,{pending:w=!1}=e,{root:y=""}=e,{stream_every:j=1}=e,{mode:d="image"}=e,{mirror_webcam:h}=e,{include_audio:b}=e,{i18n:v}=e,{upload:F}=e,{value:M=null}=e;const R=$n();Sn(()=>{f=document.createElement("canvas"),_&&d==="image"&&window.setInterval(()=>{n&&!w&&p()},j*1e3)});const $=async g=>{const O=g.target.value;await Pe(b,n,O).then(async fe=>{D=fe,t(8,s=l.find(me=>me.deviceId===O)||null),t(13,te=!1)})};async function m(){try{Pe(b,n).then(async g=>{t(12,_e=!0),t(7,l=await _n()),D=g}).then(()=>mn(l)).then(g=>{t(7,l=g);const N=D.getTracks().map(O=>O.getSettings()?.deviceId)[0];t(8,s=N&&g.find(O=>O.deviceId===N)||l[0])}),(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)&&R("error",v("image.no_webcam_support"))}catch(g){if(g instanceof DOMException&&g.name=="NotAllowedError")R("error",v("image.allow_webcam_access"));else throw g}}function p(){var g=f.getContext("2d");if((!_||_&&S)&&n.videoWidth&&n.videoHeight){if(f.width=n.videoWidth,f.height=n.videoHeight,g.drawImage(n,0,0,n.videoWidth,n.videoHeight),h&&(g.scale(-1,1),g.drawImage(n,-n.videoWidth,0)),_&&(!S||a==="waiting"))return;if(_){const N=f.toDataURL("image/jpeg");R("stream",N);return}f.toBlob(N=>{R(_?"stream":"capture",N)},`image/${_?"jpeg":"png"}`,.8)}}let S=!1,X=[],D,L,V;function ee(){if(S){V.stop();let g=new Blob(X,{type:L}),N=new FileReader;N.onload=async function(O){if(O.target){let fe=new File([g],"sample."+L.substring(6));const me=await Ct([fe]);let Me=(await F(me,y))?.filter(Boolean)[0];R("capture",Me),R("stop_recording")}},N.readAsDataURL(g)}else{R("start_recording"),X=[];let g=["video/webm","video/mp4"];for(let N of g)if(MediaRecorder.isTypeSupported(N)){L=N;break}if(L===null){console.error("No supported MediaRecorder mimeType");return}V=new MediaRecorder(D,{mimeType:L}),V.addEventListener("dataavailable",function(N){X.push(N.data)}),V.start(200)}t(11,S=!S)}let _e=!1;function qe(){d==="image"&&_&&t(11,S=!S),d==="image"?p():ee(),!S&&D&&(R("close_stream"),D.getTracks().forEach(g=>g.stop()),t(6,n.srcObject=null,n),t(12,_e=!1),window.setTimeout(()=>{t(0,M=null)},500),t(0,M=null))}let te=!1;function re(g){g.preventDefault(),g.stopPropagation(),t(13,te=!1)}function Ce(g){bn[g?"unshift":"push"](()=>{n=g,t(6,n)})}const De=async()=>m(),Ee=()=>t(13,te=!0),ze=()=>t(13,te=!1);return i.$$set=g=>{"streaming"in g&&t(1,_=g.streaming),"pending"in g&&t(20,w=g.pending),"root"in g&&t(21,y=g.root),"stream_every"in g&&t(22,j=g.stream_every),"mode"in g&&t(2,d=g.mode),"mirror_webcam"in g&&t(3,h=g.mirror_webcam),"include_audio"in g&&t(23,b=g.include_audio),"i18n"in g&&t(4,v=g.i18n),"upload"in g&&t(24,F=g.upload),"value"in g&&t(0,M=g.value)},[M,_,d,h,v,Fe,n,l,s,r,a,S,_e,te,$,m,qe,re,o,u,w,y,j,b,F,Ce,De,Ee,ze]}class Tn extends dn{constructor(e){super(),vn(this,e,Rn,jn,yn,{modify_stream:18,set_time_limit:19,streaming:1,pending:20,root:21,stream_every:22,mode:2,mirror_webcam:3,include_audio:23,i18n:4,upload:24,value:0,click_outside:5},null,[-1,-1])}get modify_stream(){return this.$$.ctx[18]}get set_time_limit(){return this.$$.ctx[19]}get streaming(){return this.$$.ctx[1]}set streaming(e){this.$$set({streaming:e}),P()}get pending(){return this.$$.ctx[20]}set pending(e){this.$$set({pending:e}),P()}get root(){return this.$$.ctx[21]}set root(e){this.$$set({root:e}),P()}get stream_every(){return this.$$.ctx[22]}set stream_every(e){this.$$set({stream_every:e}),P()}get mode(){return this.$$.ctx[2]}set mode(e){this.$$set({mode:e}),P()}get mirror_webcam(){return this.$$.ctx[3]}set mirror_webcam(e){this.$$set({mirror_webcam:e}),P()}get include_audio(){return this.$$.ctx[23]}set include_audio(e){this.$$set({include_audio:e}),P()}get i18n(){return this.$$.ctx[4]}set i18n(e){this.$$set({i18n:e}),P()}get upload(){return this.$$.ctx[24]}set upload(e){this.$$set({upload:e}),P()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),P()}get click_outside(){return Fe}}const Un=Tn,{SvelteComponent:Ln,add_flush_callback:he,append:ke,attr:Ie,bind:be,binding_callbacks:ne,bubble:ye,check_outros:ce,create_component:J,create_slot:Vn,destroy_component:K,detach:ie,element:Ue,empty:st,flush:E,get_all_dirty_from_scope:An,get_slot_changes:Fn,group_outros:ue,init:Hn,insert:le,listen:On,mount_component:Q,safe_not_equal:Pn,set_style:Ze,space:ae,toggle_class:Se,transition_in:I,transition_out:q,update_slot_base:Gn}=window.__gradio__svelte__internal,{createEventDispatcher:Jn,tick:Kn}=window.__gradio__svelte__internal;function xe(i){let e,t,n,l,s=!i[21]&&i[18]&&et(i),r=i[21]&&i[18]&&tt(i);return n=new Le({props:{Icon:gt,label:"Remove Image"}}),n.$on("click",i[32]),{c(){s&&s.c(),e=ae(),r&&r.c(),t=ae(),J(n.$$.fragment)},m(a,o){s&&s.m(a,o),le(a,e,o),r&&r.m(a,o),le(a,t,o),Q(n,a,o),l=!0},p(a,o){!a[21]&&a[18]?s?(s.p(a,o),o[0]&2359296&&I(s,1)):(s=et(a),s.c(),I(s,1),s.m(e.parentNode,e)):s&&(ue(),q(s,1,1,()=>{s=null}),ce()),a[21]&&a[18]?r?(r.p(a,o),o[0]&2359296&&I(r,1)):(r=tt(a),r.c(),I(r,1),r.m(t.parentNode,t)):r&&(ue(),q(r,1,1,()=>{r=null}),ce())},i(a){l||(I(s),I(r),I(n.$$.fragment,a),l=!0)},o(a){q(s),q(r),q(n.$$.fragment,a),l=!1},d(a){a&&(ie(e),ie(t)),s&&s.d(a),r&&r.d(a),K(n,a)}}}function et(i){let e,t;return e=new Le({props:{Icon:bt,label:i[21]?"Exit full screen":"View in full screen"}}),e.$on("click",i[29]),{c(){J(e.$$.fragment)},m(n,l){Q(e,n,l),t=!0},p(n,l){const s={};l[0]&2097152&&(s.label=n[21]?"Exit full screen":"View in full screen"),e.$set(s)},i(n){t||(I(e.$$.fragment,n),t=!0)},o(n){q(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function tt(i){let e,t;return e=new Le({props:{Icon:pt,label:i[21]?"Exit full screen":"View in full screen"}}),e.$on("click",i[29]),{c(){J(e.$$.fragment)},m(n,l){Q(e,n,l),t=!0},p(n,l){const s={};l[0]&2097152&&(s.label=n[21]?"Exit full screen":"View in full screen"),e.$set(s)},i(n){t||(I(e.$$.fragment,n),t=!0)},o(n){q(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function Qn(i){let e,t,n=i[3]?.url&&!i[19]&&xe(i);return{c(){n&&n.c(),e=st()},m(l,s){n&&n.m(l,s),le(l,e,s),t=!0},p(l,s){l[3]?.url&&!l[19]?n?(n.p(l,s),s[0]&524296&&I(n,1)):(n=xe(l),n.c(),I(n,1),n.m(e.parentNode,e)):n&&(ue(),q(n,1,1,()=>{n=null}),ce())},i(l){t||(I(n),t=!0)},o(l){q(n),t=!1},d(l){l&&ie(e),n&&n.d(l)}}}function nt(i){let e;const t=i[31].default,n=Vn(t,i,i[47],null);return{c(){n&&n.c()},m(l,s){n&&n.m(l,s),e=!0},p(l,s){n&&n.p&&(!e||s[1]&65536)&&Gn(n,t,l,l[47],e?Fn(t,l[47],s,null):An(l[47]),null)},i(l){e||(I(n,l),e=!0)},o(l){q(n,l),e=!1},d(l){n&&n.d(l)}}}function Xn(i){let e,t,n=i[3]===null&&nt(i);return{c(){n&&n.c(),e=st()},m(l,s){n&&n.m(l,s),le(l,e,s),t=!0},p(l,s){l[3]===null?n?(n.p(l,s),s[0]&8&&I(n,1)):(n=nt(l),n.c(),I(n,1),n.m(e.parentNode,e)):n&&(ue(),q(n,1,1,()=>{n=null}),ce())},i(l){t||(I(n),t=!0)},o(l){q(n),t=!1},d(l){l&&ie(e),n&&n.d(l)}}}function Yn(i){let e,t,n,l,s;return t=new Et({props:{src:i[3].url,alt:i[3].alt_text}}),{c(){e=Ue("div"),J(t.$$.fragment),Ie(e,"class","image-frame svelte-1ti4ehe"),Se(e,"selectable",i[11])},m(r,a){le(r,e,a),Q(t,e,null),n=!0,l||(s=On(e,"click",i[27]),l=!0)},p(r,a){const o={};a[0]&8&&(o.src=r[3].url),a[0]&8&&(o.alt=r[3].alt_text),t.$set(o),(!n||a[0]&2048)&&Se(e,"selectable",r[11])},i(r){n||(I(t.$$.fragment,r),n=!0)},o(r){q(t.$$.fragment,r),n=!1},d(r){r&&ie(e),K(t),l=!1,s()}}}function Zn(i){let e,t,n,l;function s(o){i[37](o)}function r(o){i[38](o)}let a={root:i[12],value:i[3],mirror_webcam:i[10],stream_every:i[17],streaming:i[9],mode:"image",include_audio:!1,i18n:i[13],upload:i[15]};return i[4]!==void 0&&(a.modify_stream=i[4]),i[5]!==void 0&&(a.set_time_limit=i[5]),e=new Un({props:a}),ne.push(()=>be(e,"modify_stream",s)),ne.push(()=>be(e,"set_time_limit",r)),e.$on("capture",i[39]),e.$on("stream",i[40]),e.$on("error",i[41]),e.$on("drag",i[42]),e.$on("upload",i[43]),e.$on("close_stream",i[44]),{c(){J(e.$$.fragment)},m(o,u){Q(e,o,u),l=!0},p(o,u){const f={};u[0]&4096&&(f.root=o[12]),u[0]&8&&(f.value=o[3]),u[0]&1024&&(f.mirror_webcam=o[10]),u[0]&131072&&(f.stream_every=o[17]),u[0]&512&&(f.streaming=o[9]),u[0]&8192&&(f.i18n=o[13]),u[0]&32768&&(f.upload=o[15]),!t&&u[0]&16&&(t=!0,f.modify_stream=o[4],he(()=>t=!1)),!n&&u[0]&32&&(n=!0,f.set_time_limit=o[5],he(()=>n=!1)),e.$set(f)},i(o){l||(I(e.$$.fragment,o),l=!0)},o(o){q(e.$$.fragment,o),l=!1},d(o){K(e,o)}}}function it(i){let e,t,n;function l(r){i[45](r)}let s={sources:i[8],handle_clear:i[24],handle_select:i[28]};return i[1]!==void 0&&(s.active_source=i[1]),e=new kt({props:s}),ne.push(()=>be(e,"active_source",l)),{c(){J(e.$$.fragment)},m(r,a){Q(e,r,a),n=!0},p(r,a){const o={};a[0]&256&&(o.sources=r[8]),!t&&a[0]&2&&(t=!0,o.active_source=r[1],he(()=>t=!1)),e.$set(o)},i(r){n||(I(e.$$.fragment,r),n=!0)},o(r){q(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function xn(i){let e,t,n,l,s,r,a,o,u,f,_,w,y,j=i[8].length>1||i[8].includes("clipboard"),d;e=new dt({props:{show_label:i[7],Icon:ht,label:i[6]||"Image"}}),l=new yt({props:{$$slots:{default:[Qn]},$$scope:{ctx:i}}});function h(m){i[34](m)}function b(m){i[35](m)}let v={hidden:i[3]!==null||i[1]==="webcam",filetype:i[1]==="clipboard"?"clipboard":"image/*",root:i[12],max_file_size:i[14],disable_click:!i[8].includes("upload")||i[3]!==null,upload:i[15],stream_handler:i[16],$$slots:{default:[Xn]},$$scope:{ctx:i}};i[0]!==void 0&&(v.uploading=i[0]),i[2]!==void 0&&(v.dragging=i[2]),a=new Dt({props:v}),i[33](a),ne.push(()=>be(a,"uploading",h)),ne.push(()=>be(a,"dragging",b)),a.$on("load",i[23]),a.$on("error",i[36]);const F=[Zn,Yn],M=[];function R(m,p){return m[1]==="webcam"&&(m[9]||!m[9]&&!m[3])?0:m[3]!==null&&!m[9]?1:-1}~(_=R(i))&&(w=M[_]=F[_](i));let $=j&&it(i);return{c(){J(e.$$.fragment),t=ae(),n=Ue("div"),J(l.$$.fragment),s=ae(),r=Ue("div"),J(a.$$.fragment),f=ae(),w&&w.c(),y=ae(),$&&$.c(),Ie(r,"class","upload-container svelte-1ti4ehe"),Se(r,"reduced-height",i[8].length>1),Ze(r,"width",i[3]?"auto":"100%"),Ie(n,"data-testid","image"),Ie(n,"class","image-container svelte-1ti4ehe")},m(m,p){Q(e,m,p),le(m,t,p),le(m,n,p),Q(l,n,null),ke(n,s),ke(n,r),Q(a,r,null),ke(r,f),~_&&M[_].m(r,null),ke(n,y),$&&$.m(n,null),i[46](n),d=!0},p(m,p){const S={};p[0]&128&&(S.show_label=m[7]),p[0]&64&&(S.label=m[6]||"Image"),e.$set(S);const X={};p[0]&2883592|p[1]&65536&&(X.$$scope={dirty:p,ctx:m}),l.$set(X);const D={};p[0]&10&&(D.hidden=m[3]!==null||m[1]==="webcam"),p[0]&2&&(D.filetype=m[1]==="clipboard"?"clipboard":"image/*"),p[0]&4096&&(D.root=m[12]),p[0]&16384&&(D.max_file_size=m[14]),p[0]&264&&(D.disable_click=!m[8].includes("upload")||m[3]!==null),p[0]&32768&&(D.upload=m[15]),p[0]&65536&&(D.stream_handler=m[16]),p[0]&8|p[1]&65536&&(D.$$scope={dirty:p,ctx:m}),!o&&p[0]&1&&(o=!0,D.uploading=m[0],he(()=>o=!1)),!u&&p[0]&4&&(u=!0,D.dragging=m[2],he(()=>u=!1)),a.$set(D);let L=_;_=R(m),_===L?~_&&M[_].p(m,p):(w&&(ue(),q(M[L],1,1,()=>{M[L]=null}),ce()),~_?(w=M[_],w?w.p(m,p):(w=M[_]=F[_](m),w.c()),I(w,1),w.m(r,null)):w=null),(!d||p[0]&256)&&Se(r,"reduced-height",m[8].length>1),p[0]&8&&Ze(r,"width",m[3]?"auto":"100%"),p[0]&256&&(j=m[8].length>1||m[8].includes("clipboard")),j?$?($.p(m,p),p[0]&256&&I($,1)):($=it(m),$.c(),I($,1),$.m(n,null)):$&&(ue(),q($,1,1,()=>{$=null}),ce())},i(m){d||(I(e.$$.fragment,m),I(l.$$.fragment,m),I(a.$$.fragment,m),I(w),I($),d=!0)},o(m){q(e.$$.fragment,m),q(l.$$.fragment,m),q(a.$$.fragment,m),q(w),q($),d=!1},d(m){m&&(ie(t),ie(n)),K(e,m),K(l),i[33](null),K(a),~_&&M[_].d(),$&&$.d(),i[46](null)}}}function ei(i,e,t){let n,{$$slots:l={},$$scope:s}=e,{value:r=null}=e,{label:a=void 0}=e,{show_label:o}=e,{sources:u=["upload","clipboard","webcam"]}=e,{streaming:f=!1}=e,{pending:_=!1}=e,{mirror_webcam:w}=e,{selectable:y=!1}=e,{root:j}=e,{i18n:d}=e,{max_file_size:h=null}=e,{upload:b}=e,{stream_handler:v}=e,{stream_every:F}=e,{modify_stream:M}=e,{set_time_limit:R}=e,{show_fullscreen_button:$=!0}=e,m,{uploading:p=!1}=e,{active_source:S=null}=e;function X({detail:c}){f||(t(3,r=c),V("upload"))}function D(){t(3,r=null),V("clear"),V("change",null)}async function L(c,se){if(se==="stream"){V("stream",{value:{url:c},is_value_data:!0});return}t(30,_=!0);const mt=await m.load_files([new File([c],`image/${f?"jpeg":"png"}`)]);(se==="change"||se==="upload")&&(t(3,r=mt?.[0]||null),await Kn(),V("change")),t(30,_=!1)}const V=Jn();let{dragging:ee=!1}=e;function _e(c){let se=It(c);se&&V("select",{index:se,value:null})}async function qe(c){switch(c){case"clipboard":m.paste_clipboard();break}}let te=!1,re;const Ce=async()=>{await re.requestFullscreen()},De=c=>{t(3,r=null),V("clear"),c.stopPropagation()};function Ee(c){ne[c?"unshift":"push"](()=>{m=c,t(20,m)})}function ze(c){p=c,t(0,p)}function g(c){ee=c,t(2,ee)}function N(c){ye.call(this,i,c)}function O(c){M=c,t(4,M)}function fe(c){R=c,t(5,R)}const me=c=>L(c.detail,"change"),Me=c=>L(c.detail,"stream");function ot(c){ye.call(this,i,c)}function at(c){ye.call(this,i,c)}const ct=c=>L(c.detail,"upload");function ut(c){ye.call(this,i,c)}function _t(c){S=c,t(1,S),t(8,u)}function ft(c){ne[c?"unshift":"push"](()=>{re=c,t(22,re)})}return i.$$set=c=>{"value"in c&&t(3,r=c.value),"label"in c&&t(6,a=c.label),"show_label"in c&&t(7,o=c.show_label),"sources"in c&&t(8,u=c.sources),"streaming"in c&&t(9,f=c.streaming),"pending"in c&&t(30,_=c.pending),"mirror_webcam"in c&&t(10,w=c.mirror_webcam),"selectable"in c&&t(11,y=c.selectable),"root"in c&&t(12,j=c.root),"i18n"in c&&t(13,d=c.i18n),"max_file_size"in c&&t(14,h=c.max_file_size),"upload"in c&&t(15,b=c.upload),"stream_handler"in c&&t(16,v=c.stream_handler),"stream_every"in c&&t(17,F=c.stream_every),"modify_stream"in c&&t(4,M=c.modify_stream),"set_time_limit"in c&&t(5,R=c.set_time_limit),"show_fullscreen_button"in c&&t(18,$=c.show_fullscreen_button),"uploading"in c&&t(0,p=c.uploading),"active_source"in c&&t(1,S=c.active_source),"dragging"in c&&t(2,ee=c.dragging),"$$scope"in c&&t(47,s=c.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&258&&!S&&u&&t(1,S=u[0]),i.$$.dirty[0]&514&&t(19,n=f&&S==="webcam"),i.$$.dirty[0]&524289&&p&&!n&&t(3,r=null),i.$$.dirty[0]&4&&V("drag",ee)},[p,S,ee,r,M,R,a,o,u,f,w,y,j,d,h,b,v,F,$,n,m,te,re,X,D,L,V,_e,qe,Ce,_,l,De,Ee,ze,g,N,O,fe,me,Me,ot,at,ct,ut,_t,ft,s]}class ti extends Ln{constructor(e){super(),Hn(this,e,ei,xn,Pn,{value:3,label:6,show_label:7,sources:8,streaming:9,pending:30,mirror_webcam:10,selectable:11,root:12,i18n:13,max_file_size:14,upload:15,stream_handler:16,stream_every:17,modify_stream:4,set_time_limit:5,show_fullscreen_button:18,uploading:0,active_source:1,dragging:2},null,[-1,-1])}get value(){return this.$$.ctx[3]}set value(e){this.$$set({value:e}),E()}get label(){return this.$$.ctx[6]}set label(e){this.$$set({label:e}),E()}get show_label(){return this.$$.ctx[7]}set show_label(e){this.$$set({show_label:e}),E()}get sources(){return this.$$.ctx[8]}set sources(e){this.$$set({sources:e}),E()}get streaming(){return this.$$.ctx[9]}set streaming(e){this.$$set({streaming:e}),E()}get pending(){return this.$$.ctx[30]}set pending(e){this.$$set({pending:e}),E()}get mirror_webcam(){return this.$$.ctx[10]}set mirror_webcam(e){this.$$set({mirror_webcam:e}),E()}get selectable(){return this.$$.ctx[11]}set selectable(e){this.$$set({selectable:e}),E()}get root(){return this.$$.ctx[12]}set root(e){this.$$set({root:e}),E()}get i18n(){return this.$$.ctx[13]}set i18n(e){this.$$set({i18n:e}),E()}get max_file_size(){return this.$$.ctx[14]}set max_file_size(e){this.$$set({max_file_size:e}),E()}get upload(){return this.$$.ctx[15]}set upload(e){this.$$set({upload:e}),E()}get stream_handler(){return this.$$.ctx[16]}set stream_handler(e){this.$$set({stream_handler:e}),E()}get stream_every(){return this.$$.ctx[17]}set stream_every(e){this.$$set({stream_every:e}),E()}get modify_stream(){return this.$$.ctx[4]}set modify_stream(e){this.$$set({modify_stream:e}),E()}get set_time_limit(){return this.$$.ctx[5]}set set_time_limit(e){this.$$set({set_time_limit:e}),E()}get show_fullscreen_button(){return this.$$.ctx[18]}set show_fullscreen_button(e){this.$$set({show_fullscreen_button:e}),E()}get uploading(){return this.$$.ctx[0]}set uploading(e){this.$$set({uploading:e}),E()}get active_source(){return this.$$.ctx[1]}set active_source(e){this.$$set({active_source:e}),E()}get dragging(){return this.$$.ctx[2]}set dragging(e){this.$$set({dragging:e}),E()}}const vi=ti;export{vi as I,Un as W};
//# sourceMappingURL=ImageUploader-CG5Ygga_.js.map
