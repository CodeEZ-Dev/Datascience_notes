import{B as Ie}from"./Block-rEXcgPfT.js";import"./MarkdownCode.svelte_svelte_type_style_lang-DGVaFc0z.js";import"./IconButtonWrapper.svelte_svelte_type_style_lang-DAP8_Zsr.js";import{B as Me}from"./BlockLabel-CnzaitFN.js";import{I as oe}from"./IconButton-DtUbToT-.js";import{E as Be}from"./Empty-CMV1fpYf.js";import{I as ae,M as Ee,a as ze}from"./Minimize-Biy58KWs.js";import{I as qe}from"./IconButtonWrapper-fdTarNL8.js";import{S as Ne}from"./index-BX_THMbX.js";import"./StreamingBar.svelte_svelte_type_style_lang-CxOfZBE-.js";import"./index-C3YFQtYK.js";import{r as Z}from"./file-url-DgijyRSD.js";/* empty css                                                   */import"./prism-python-CPCQ_rdc.js";import"./Clear-By3xiIwg.js";import"./svelte/svelte.js";import"./context-TgWPFwN2.js";const{SvelteComponent:Se,append:C,assign:Fe,attr:v,binding_callbacks:Le,check_outros:Q,create_component:z,destroy_component:q,destroy_each:re,detach:I,element:P,empty:ue,ensure_array_like:$,flush:w,get_spread_object:Pe,get_spread_update:je,group_outros:R,init:Ce,insert:M,listen:j,mount_component:N,noop:fe,run_all:Ve,safe_not_equal:We,set_data:$e,set_style:y,space:S,src_url_equal:A,text:Ae,toggle_class:E,transition_in:k,transition_out:p}=window.__gradio__svelte__internal,{onMount:De}=window.__gradio__svelte__internal;function x(t,e,n){const l=t.slice();return l[32]=e[n],l[34]=n,l}function ee(t,e,n){const l=t.slice();return l[32]=e[n],l[34]=n,l}function Ge(t){let e,n,l,i,s,o,f,b,g;n=new qe({props:{$$slots:{default:[Je]},$$scope:{ctx:t}}});let h=$(t[15]?t[15]?.annotations:[]),_=[];for(let u=0;u<h.length;u+=1)_[u]=ne(ee(t,h,u));let m=t[6]&&t[15]&&ie(t);return{c(){e=P("div"),z(n.$$.fragment),l=S(),i=P("img"),o=S();for(let u=0;u<_.length;u+=1)_[u].c();f=S(),m&&m.c(),b=ue(),v(i,"class","base-image svelte-303fln"),A(i.src,s=t[15]?t[15].image.url:null)||v(i,"src",s),v(i,"alt","the base file that is annotated"),E(i,"fit-height",t[7]&&!t[17]),v(e,"class","image-container svelte-303fln")},m(u,r){M(u,e,r),N(n,e,null),C(e,l),C(e,i),C(e,o);for(let c=0;c<_.length;c+=1)_[c]&&_[c].m(e,null);t[26](e),M(u,f,r),m&&m.m(u,r),M(u,b,r),g=!0},p(u,r){const c={};if(r[0]&147456|r[1]&32&&(c.$$scope={dirty:r,ctx:u}),n.$set(c),(!g||r[0]&32768&&!A(i.src,s=u[15]?u[15].image.url:null))&&v(i,"src",s),(!g||r[0]&131200)&&E(i,"fit-height",u[7]&&!u[17]),r[0]&229904){h=$(u[15]?u[15]?.annotations:[]);let d;for(d=0;d<h.length;d+=1){const B=ee(u,h,d);_[d]?_[d].p(B,r):(_[d]=ne(B),_[d].c(),_[d].m(e,null))}for(;d<_.length;d+=1)_[d].d(1);_.length=h.length}u[6]&&u[15]?m?m.p(u,r):(m=ie(u),m.c(),m.m(b.parentNode,b)):m&&(m.d(1),m=null)},i(u){g||(k(n.$$.fragment,u),g=!0)},o(u){p(n.$$.fragment,u),g=!1},d(u){u&&(I(e),I(f),I(b)),q(n),re(_,u),t[26](null),m&&m.d(u)}}}function He(t){let e,n;return e=new Be({props:{size:"large",unpadded_box:!0,$$slots:{default:[Ke]},$$scope:{ctx:t}}}),{c(){z(e.$$.fragment)},m(l,i){N(e,l,i),n=!0},p(l,i){const s={};i[1]&32&&(s.$$scope={dirty:i,ctx:l}),e.$set(s)},i(l){n||(k(e.$$.fragment,l),n=!0)},o(l){p(e.$$.fragment,l),n=!1},d(l){q(e,l)}}}function le(t){let e,n;return e=new oe({props:{Icon:Ee,label:"View in full screen"}}),e.$on("click",t[19]),{c(){z(e.$$.fragment)},m(l,i){N(e,l,i),n=!0},p:fe,i(l){n||(k(e.$$.fragment,l),n=!0)},o(l){p(e.$$.fragment,l),n=!1},d(l){q(e,l)}}}function te(t){let e,n;return e=new oe({props:{Icon:ze,label:"Exit full screen"}}),e.$on("click",t[19]),{c(){z(e.$$.fragment)},m(l,i){N(e,l,i),n=!0},p:fe,i(l){n||(k(e.$$.fragment,l),n=!0)},o(l){p(e.$$.fragment,l),n=!1},d(l){q(e,l)}}}function Je(t){let e,n,l,i=!t[17]&&t[14]&&le(t),s=t[17]&&te(t);return{c(){i&&i.c(),e=S(),s&&s.c(),n=ue()},m(o,f){i&&i.m(o,f),M(o,e,f),s&&s.m(o,f),M(o,n,f),l=!0},p(o,f){!o[17]&&o[14]?i?(i.p(o,f),f[0]&147456&&k(i,1)):(i=le(o),i.c(),k(i,1),i.m(e.parentNode,e)):i&&(R(),p(i,1,1,()=>{i=null}),Q()),o[17]?s?(s.p(o,f),f[0]&131072&&k(s,1)):(s=te(o),s.c(),k(s,1),s.m(n.parentNode,n)):s&&(R(),p(s,1,1,()=>{s=null}),Q())},i(o){l||(k(i),k(s),l=!0)},o(o){p(i),p(s),l=!1},d(o){o&&(I(e),I(n)),i&&i.d(o),s&&s.d(o)}}}function ne(t){let e,n,l,i;return{c(){e=P("img"),v(e,"alt",n="segmentation mask identifying "+t[4]+" within the uploaded file"),v(e,"class","mask fit-height svelte-303fln"),A(e.src,l=t[32].image.url)||v(e,"src",l),v(e,"style",i=t[9]&&t[32].label in t[9]?null:`filter: hue-rotate(${Math.round(t[34]*360/t[15]?.annotations.length)}deg);`),E(e,"fit-height",!t[17]),E(e,"active",t[16]==t[32].label),E(e,"inactive",t[16]!=t[32].label&&t[16]!=null)},m(s,o){M(s,e,o)},p(s,o){o[0]&16&&n!==(n="segmentation mask identifying "+s[4]+" within the uploaded file")&&v(e,"alt",n),o[0]&32768&&!A(e.src,l=s[32].image.url)&&v(e,"src",l),o[0]&33280&&i!==(i=s[9]&&s[32].label in s[9]?null:`filter: hue-rotate(${Math.round(s[34]*360/s[15]?.annotations.length)}deg);`)&&v(e,"style",i),o[0]&131072&&E(e,"fit-height",!s[17]),o[0]&98304&&E(e,"active",s[16]==s[32].label),o[0]&98304&&E(e,"inactive",s[16]!=s[32].label&&s[16]!=null)},d(s){s&&I(e)}}}function ie(t){let e,n=$(t[15].annotations),l=[];for(let i=0;i<n.length;i+=1)l[i]=se(x(t,n,i));return{c(){e=P("div");for(let i=0;i<l.length;i+=1)l[i].c();v(e,"class","legend svelte-303fln")},m(i,s){M(i,e,s);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null)},p(i,s){if(s[0]&7373312){n=$(i[15].annotations);let o;for(o=0;o<n.length;o+=1){const f=x(i,n,o);l[o]?l[o].p(f,s):(l[o]=se(f),l[o].c(),l[o].m(e,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(i){i&&I(e),re(l,i)}}}function se(t){let e,n=t[32].label+"",l,i,s,o;function f(){return t[27](t[32])}function b(){return t[28](t[32])}function g(){return t[31](t[34],t[32])}return{c(){e=P("button"),l=Ae(n),i=S(),v(e,"class","legend-item svelte-303fln"),y(e,"background-color",t[9]&&t[32].label in t[9]?t[9][t[32].label]+"88":`hsla(${Math.round(t[34]*360/t[15].annotations.length)}, 100%, 50%, 0.3)`)},m(h,_){M(h,e,_),C(e,l),C(e,i),s||(o=[j(e,"mouseover",f),j(e,"focus",b),j(e,"mouseout",t[29]),j(e,"blur",t[30]),j(e,"click",g)],s=!0)},p(h,_){t=h,_[0]&32768&&n!==(n=t[32].label+"")&&$e(l,n),_[0]&33280&&y(e,"background-color",t[9]&&t[32].label in t[9]?t[9][t[32].label]+"88":`hsla(${Math.round(t[34]*360/t[15].annotations.length)}, 100%, 50%, 0.3)`)},d(h){h&&I(e),s=!1,Ve(o)}}}function Ke(t){let e,n;return e=new ae({}),{c(){z(e.$$.fragment)},m(l,i){N(e,l,i),n=!0},i(l){n||(k(e.$$.fragment,l),n=!0)},o(l){p(e.$$.fragment,l),n=!1},d(l){q(e,l)}}}function Oe(t){let e,n,l,i,s,o,f,b;const g=[{autoscroll:t[3].autoscroll},{i18n:t[3].i18n},t[13]];let h={};for(let r=0;r<g.length;r+=1)h=Fe(h,g[r]);e=new Ne({props:h}),l=new Me({props:{show_label:t[5],Icon:ae,label:t[4]||t[3].i18n("image.image")}});const _=[He,Ge],m=[];function u(r,c){return r[15]==null?0:1}return o=u(t),f=m[o]=_[o](t),{c(){z(e.$$.fragment),n=S(),z(l.$$.fragment),i=S(),s=P("div"),f.c(),v(s,"class","container svelte-303fln")},m(r,c){N(e,r,c),M(r,n,c),N(l,r,c),M(r,i,c),M(r,s,c),m[o].m(s,null),b=!0},p(r,c){const d=c[0]&8200?je(g,[c[0]&8&&{autoscroll:r[3].autoscroll},c[0]&8&&{i18n:r[3].i18n},c[0]&8192&&Pe(r[13])]):{};e.$set(d);const B={};c[0]&32&&(B.show_label=r[5]),c[0]&24&&(B.label=r[4]||r[3].i18n("image.image")),l.$set(B);let F=o;o=u(r),o===F?m[o].p(r,c):(R(),p(m[F],1,1,()=>{m[F]=null}),Q(),f=m[o],f?f.p(r,c):(f=m[o]=_[o](r),f.c()),k(f,1),f.m(s,null))},i(r){b||(k(e.$$.fragment,r),k(l.$$.fragment,r),k(f),b=!0)},o(r){p(e.$$.fragment,r),p(l.$$.fragment,r),p(f),b=!1},d(r){r&&(I(n),I(i),I(s)),q(e,r),q(l,r),m[o].d()}}}function Qe(t){let e,n;return e=new Ie({props:{visible:t[2],elem_id:t[0],elem_classes:t[1],padding:!1,height:t[7],width:t[8],allow_overflow:!1,container:t[10],scale:t[11],min_width:t[12],$$slots:{default:[Oe]},$$scope:{ctx:t}}}),{c(){z(e.$$.fragment)},m(l,i){N(e,l,i),n=!0},p(l,i){const s={};i[0]&4&&(s.visible=l[2]),i[0]&1&&(s.elem_id=l[0]),i[0]&2&&(s.elem_classes=l[1]),i[0]&128&&(s.height=l[7]),i[0]&256&&(s.width=l[8]),i[0]&1024&&(s.container=l[10]),i[0]&2048&&(s.scale=l[11]),i[0]&4096&&(s.min_width=l[12]),i[0]&516856|i[1]&32&&(s.$$scope={dirty:i,ctx:l}),e.$set(s)},i(l){n||(k(e.$$.fragment,l),n=!0)},o(l){p(e.$$.fragment,l),n=!1},d(l){q(e,l)}}}function Re(t,e,n){let{elem_id:l=""}=e,{elem_classes:i=[]}=e,{visible:s=!0}=e,{value:o=null}=e,f=null,b=null,{gradio:g}=e,{label:h=g.i18n("annotated_image.annotated_image")}=e,{show_label:_=!0}=e,{show_legend:m=!0}=e,{height:u}=e,{width:r}=e,{color_map:c}=e,{container:d=!0}=e,{scale:B=null}=e,{min_width:F=void 0}=e,D=null,{loading_status:T}=e,{show_fullscreen_button:U=!0}=e,G=!1,V;De(()=>{document.addEventListener("fullscreenchange",()=>{n(17,G=!!document.fullscreenElement)})});const _e=async()=>{G?await document.exitFullscreen():await V.requestFullscreen()};let H=null;function J(a){n(16,D=a)}function K(){n(16,D=null)}function X(a,W){g.dispatch("select",{value:h,index:a})}function me(a){Le[a?"unshift":"push"](()=>{V=a,n(18,V)})}const ce=a=>J(a.label),he=a=>J(a.label),ge=()=>K(),be=()=>K(),de=(a,W)=>X(a,W.label);return t.$$set=a=>{"elem_id"in a&&n(0,l=a.elem_id),"elem_classes"in a&&n(1,i=a.elem_classes),"visible"in a&&n(2,s=a.visible),"value"in a&&n(23,o=a.value),"gradio"in a&&n(3,g=a.gradio),"label"in a&&n(4,h=a.label),"show_label"in a&&n(5,_=a.show_label),"show_legend"in a&&n(6,m=a.show_legend),"height"in a&&n(7,u=a.height),"width"in a&&n(8,r=a.width),"color_map"in a&&n(9,c=a.color_map),"container"in a&&n(10,d=a.container),"scale"in a&&n(11,B=a.scale),"min_width"in a&&n(12,F=a.min_width),"loading_status"in a&&n(13,T=a.loading_status),"show_fullscreen_button"in a&&n(14,U=a.show_fullscreen_button)},t.$$.update=()=>{if(t.$$.dirty[0]&58720264)if(o!==f&&(n(24,f=o),g.dispatch("change")),o){const a={image:o.image,annotations:o.annotations.map(L=>({image:L.image,label:L.label}))};n(15,b=a);const W=Z(a.image.url),we=Promise.all(a.annotations.map(L=>Z(L.image.url))),O=Promise.all([W,we]);n(25,H=O),O.then(([L,ke])=>{if(H!==O)return;const ve={image:{...a.image,url:L??void 0},annotations:a.annotations.map((Y,pe)=>({...Y,image:{...Y.image,url:ke[pe]??void 0}}))};n(15,b=ve)})}else n(15,b=null)},[l,i,s,g,h,_,m,u,r,c,d,B,F,T,U,b,D,G,V,_e,J,K,X,o,f,H,me,ce,he,ge,be,de]}class fl extends Se{constructor(e){super(),Ce(this,e,Re,Qe,We,{elem_id:0,elem_classes:1,visible:2,value:23,gradio:3,label:4,show_label:5,show_legend:6,height:7,width:8,color_map:9,container:10,scale:11,min_width:12,loading_status:13,show_fullscreen_button:14},null,[-1,-1])}get elem_id(){return this.$$.ctx[0]}set elem_id(e){this.$$set({elem_id:e}),w()}get elem_classes(){return this.$$.ctx[1]}set elem_classes(e){this.$$set({elem_classes:e}),w()}get visible(){return this.$$.ctx[2]}set visible(e){this.$$set({visible:e}),w()}get value(){return this.$$.ctx[23]}set value(e){this.$$set({value:e}),w()}get gradio(){return this.$$.ctx[3]}set gradio(e){this.$$set({gradio:e}),w()}get label(){return this.$$.ctx[4]}set label(e){this.$$set({label:e}),w()}get show_label(){return this.$$.ctx[5]}set show_label(e){this.$$set({show_label:e}),w()}get show_legend(){return this.$$.ctx[6]}set show_legend(e){this.$$set({show_legend:e}),w()}get height(){return this.$$.ctx[7]}set height(e){this.$$set({height:e}),w()}get width(){return this.$$.ctx[8]}set width(e){this.$$set({width:e}),w()}get color_map(){return this.$$.ctx[9]}set color_map(e){this.$$set({color_map:e}),w()}get container(){return this.$$.ctx[10]}set container(e){this.$$set({container:e}),w()}get scale(){return this.$$.ctx[11]}set scale(e){this.$$set({scale:e}),w()}get min_width(){return this.$$.ctx[12]}set min_width(e){this.$$set({min_width:e}),w()}get loading_status(){return this.$$.ctx[13]}set loading_status(e){this.$$set({loading_status:e}),w()}get show_fullscreen_button(){return this.$$.ctx[14]}set show_fullscreen_button(e){this.$$set({show_fullscreen_button:e}),w()}}export{fl as default};
//# sourceMappingURL=Index-CX0yS4FI.js.map
